<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predictive Route Advisor - Outsmart Traffic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
        }
        .hero-bg {
            background-color: #0056b3;
            background-image: linear-gradient(135deg, #0056b3 0%, #003d82 100%);
        }
        .icon-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .icon-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        /* Style for the map placeholder if no map is loaded */
        .map-placeholder {
            background-color: #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            color: #6c757d;
            border: 2px dashed #ced4da;
        }
        .folium-map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="text-2xl font-bold text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-2 text-blue-600"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"></path><path d="M12 18V6"></path><path d="m6 12 6-6 6 6"></path></svg>
                    RouteAdvisor
                </div>
                <nav>
                    <a href="#" class="text-gray-600 hover:text-blue-600 px-3 py-2">Home</a>
                    <a href="#features" class="text-gray-600 hover:text-blue-600 px-3 py-2">Features</a>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <!-- Hero Section with Form -->
        <section class="hero-bg text-white">
            <div class="container mx-auto px-6 py-20 text-center">
                <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-4">Outsmart Traffic. Arrive on Time.</h1>
                <p class="text-lg md:text-xl text-blue-200 mb-10">Get weather-aware route predictions powered by machine learning to find the fastest way to your destination.</p>

                <div class="max-w-4xl mx-auto bg-white rounded-lg p-8 shadow-2xl">
                    <form method="POST">
                        {% csrf_token %}
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- Source -->
                            <div class="form-group text-left">
                                <label for="source" class="block text-sm font-medium text-gray-700 mb-2">Source</label>
                                <input type="text" id="source" name="source" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-900" placeholder="e.g., Majestic, Bengaluru" required>
                            </div>
                            <!-- Destination -->
                            <div class="form-group text-left">
                                <label for="destination" class="block text-sm font-medium text-gray-700 mb-2">Destination</label>
                                <input type="text" id="destination" name="destination" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-900" placeholder="e.g., Kempegowda International Airport" required>
                            </div>
                            <!-- Datetime -->
                            <div class="form-group text-left">
                                <label for="datetime" class="block text-sm font-medium text-gray-700 mb-2">Departure Time</label>
                                <input type="datetime-local" id="datetime" name="datetime" class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-900" required>
                            </div>
                        </div>
                        <button type="submit" class="mt-8 w-full md:w-1/2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-md transition duration-300 ease-in-out text-lg">
                            Find Fastest Route
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results" class="py-16">
            <div class="container mx-auto px-6">
                <!-- Error Message Display -->
                {% if error %}
                    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-6 text-center" role="alert">
                        <strong class="font-bold">Error:</strong>
                        <span class="block sm:inline">{{ error }}</span>
                    </div>
                {% endif %}

                <!-- Recommendation Display -->
                {% if recommendation %}
                    <div class="bg-blue-100 border border-blue-400 text-blue-800 px-4 py-4 rounded-lg relative mb-8 text-center" role="alert">
                        <h2 class="text-xl font-bold mb-2">Your Smart Recommendation</h2>
                        <p class="text-lg">{{ recommendation }}</p>
                        {% if best_route.extra_time_text %}
                            <p class="text-md text-gray-700 mt-2">
                                ⏱️ Extra Time Due to Predicted Traffic: <strong>{{ best_route.extra_time_text }}</strong>
                            </p>
                        {% endif %}
                    </div>
                {% endif %}

                <!-- Map Display -->
                <div class="bg-white rounded-lg shadow-xl overflow-hidden">
                    {% if map_html %}
                        <div id="map" class="h-[600px]">
                            {{ map_html|safe }}
                        </div>
                    {% else %}
                        <div class="h-[600px] map-placeholder">
                             <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="mb-4"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                            <h3 class="text-2xl font-semibold">Your Route Will Appear Here</h3>
                            <p class="mt-2 max-w-md">Enter your source, destination, and desired departure time above to see our traffic prediction and route recommendations on an interactive map.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="bg-gray-50 py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-gray-800">Why is this different from a normal map?</h2>
                    <p class="text-gray-600 mt-4 max-w-2xl mx-auto">We go beyond real-time. Our machine learning model analyzes historical patterns and weather forecasts to predict congestion before it even happens.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Feature 1 -->
                    <div class="icon-card text-center">
                        <div class="flex items-center justify-center h-16 w-16 bg-blue-100 text-blue-600 rounded-full mx-auto mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Predictive Traffic Model</h3>
                        <p class="text-gray-600">Our model is trained on thousands of hours of traffic data, learning the rhythm of the city to forecast congestion based on time, day, and holidays.</p>
                    </div>
                    <!-- Feature 2 -->
                    <div class="icon-card text-center">
                        <div class="flex items-center justify-center h-16 w-16 bg-blue-100 text-blue-600 rounded-full mx-auto mb-6">
                           <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 17a5 5 0 0 0-3-8h-1.26A8 8 0 1 0 4 16.25"></path><path d="M8 17a5 5 0 0 0-3-8h-1a5 5 0 0 0-3 8"></path><path d="M16 17a5 5 0 0 0-3-8h-1.26a8 8 0 1 0-8 8.25"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Weather-Aware Routing</h3>
                        <p class="text-gray-600">Rain or shine, our advisor knows. We integrate weather forecasts into our predictions, because a clear day's commute is different from a rainy one.</p>
                    </div>
                    <!-- Feature 3 -->
                    <div class="icon-card text-center">
                        <div class="flex items-center justify-center h-16 w-16 bg-blue-100 text-blue-600 rounded-full mx-auto mb-6">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 13 6-6h12l-6 6h-12Z"></path><path d="m3 5 6 6h12l-6-6H3Z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Intelligent Route Comparison</h3>
                        <p class="text-gray-600">We don't just give you one route. We fetch multiple options from Google Maps and then apply our predictive model to show you which one will *actually* be fastest.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Predictive Route Advisor. Travel Smarter, Not Harder.</p>
        </div>
    </footer>

</body>
</html>

